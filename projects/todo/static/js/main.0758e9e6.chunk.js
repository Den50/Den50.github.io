(this.webpackJsonpmain=this.webpackJsonpmain||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),a=n(13),r=n.n(a),i=n(6),s=n(7),u=n(9),d=n(8),l=n(37),p=n(3),h=n(1),j=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={dropdown:!1},c}return Object(s.a)(n,[{key:"calc",value:function(){var e=this.props.todos,t=0,n=0,c=[{wday:"\u041f\u043d",countActive:0,countChecked:0,procents:0},{wday:"\u0412\u0442",countActive:0,countChecked:0,procents:0},{wday:"\u0421\u0440",countActive:0,countChecked:0,procents:0},{wday:"\u0427\u0442",countActive:0,countChecked:0,procents:0},{wday:"\u041f\u0442",countActive:0,countChecked:0,procents:0},{wday:"\u0421\u0431",countActive:0,countChecked:0,procents:0},{wday:"\u0412\u0441",countActive:0,countChecked:0,procents:0}];return e.map((function(e,o){e.active?(t++,c[(e.time+6)%7].countActive++):(n++,c[(e.time+6)%7].countChecked++)})),c.map((function(e,t){c[t].procents=Math.round(e.countChecked/(e.countChecked+e.countActive)*100)||0})),{wdays:c,globalProcents:Math.round(n/(n+t)*100)||0}}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"Barchart ".concat(this.props.theme),onClick:function(t){return e.setState({dropdown:!e.state.dropdown})},children:[Object(h.jsx)(l.a,{now:this.calc().globalProcents,label:"".concat(this.calc().globalProcents,"%")}),Object(h.jsxs)("div",{className:"wdayDropdown",style:this.state.dropdown?{display:"block"}:{display:"none"},children:[Object(h.jsx)("h4",{children:"Statistics"}),this.calc().wdays.map((function(e,t){return Object(h.jsxs)("div",{className:"wdayDropdownItem",children:[Object(h.jsxs)("span",{className:"wdayDropdownItem_label",children:[e.wday,": "]}),Object(h.jsx)(l.a,{now:e.procents,label:"".concat(e.procents,"%")})]},""+t)}))]})]})}}]),n}(c.Component),f=Object(p.b)((function(e){return{todos:e.todos,theme:e.app.theme}}),null)(j),v="TODO/ADD",b="TODO/ADD_INIT",O="TODO/DELETE",m="TODO/TOGGLE",y="TODO/IMPORT",g="FILTER/CHANGE",x="APP/CHANGE_THEME",T=function(e){return{type:g,payload:e}},k=function(e){return{type:x,payload:e}},N=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={},c}return Object(s.a)(n,[{key:"uploadJSON",value:function(e){var t=e.target.files[0],n=this,c=new FileReader;c.readAsText(t,"UTF-8"),c.onload=function(e){n.props.importTodos(JSON.parse(e.target.result).data),n.props.changeFilter(JSON.parse(e.target.result).meta.filter)}}},{key:"render",value:function(){var e=this;return Object(h.jsx)("header",{className:this.props.theme,children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"wrap_header",children:[Object(h.jsx)("div",{className:"branch",children:"Todos"}),Object(h.jsx)(f,{}),Object(h.jsxs)("div",{className:"group_tools",children:[Object(h.jsxs)("label",{className:"switch",children:[Object(h.jsx)("span",{className:"name_switch",children:"Theme: "}),Object(h.jsx)("input",{type:"checkbox",checked:"dark"==this.props.theme,onChange:function(t){return e.props.changeTheme(t.target.checked?"dark":"light")}}),Object(h.jsx)("span",{className:"slider round"})]}),Object(h.jsxs)("div",{className:"browse-button",children:[Object(h.jsx)("input",{type:"button",value:"Import TODOs"}),Object(h.jsx)("input",{type:"file",onChange:function(t){return e.uploadJSON(t)}})]})]})]})})})}}]),n}(c.Component),w=Object(p.b)((function(e){return{theme:e.app.theme}}),(function(e){return{importTodos:function(t){return e(function(e){return{type:y,payload:e}}(t))},changeFilter:function(t){return e(T(t))},changeTheme:function(t){return e(k(t))}}}))(N),C=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={},c.inputRef=o.a.createRef(),c}return Object(s.a)(n,[{key:"addTodo",value:function(e){var t=this.inputRef.value;t.length<3?alert("Enter furher value todo"):this.props.addTodo(t)}},{key:"addTodoEnter",value:function(e){if("Enter"==e.code){var t=this.inputRef.value;t.length<3?alert("Enter furher value todo"):this.props.addTodo(t)}}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"Panel ".concat(this.props.theme),children:[Object(h.jsx)("input",{type:"text",className:"inputTodo",placeholder:"Type text here...",ref:function(t){return e.inputRef=t},onKeyPress:function(t){return e.addTodoEnter(t)}}),Object(h.jsx)("button",{className:"addButton",onClick:function(t){return e.addTodo(t)},children:"Add"}),Object(h.jsxs)("div",{className:"chooseFilter",children:[Object(h.jsx)("button",{onClick:function(t){return e.props.changeFilter("all")},className:"all"==this.props.filter?"allButton active":"allButton",children:"All"}),Object(h.jsx)("button",{onClick:function(t){return e.props.changeFilter("active")},className:"active"==this.props.filter?"activedButton active":"activedButton",children:"Active"}),Object(h.jsx)("button",{onClick:function(t){return e.props.changeFilter("checked")},className:"checked"==this.props.filter?"checkedButton active":"checkedButton",children:"Checked"})]})]})}}]),n}(c.Component),D=Object(p.b)((function(e){return{filter:e.filter,theme:e.app.theme}}),(function(e){return{addTodo:function(t){return e(function(e){return{type:v,payload:e}}(t))},changeFilter:function(t){return e(T(t))}}}))(C),I=function(e){return Object(h.jsxs)("li",{className:e.active?"Todo":"Todo noactive",children:[Object(h.jsx)("input",{className:"checkbox",defaultChecked:!1,checked:!e.active,type:"checkbox",onChange:function(t){return e.eventToggle(e.id)}}),Object(h.jsx)("span",{className:"content",onClick:function(t){return e.eventToggle(e.id)},children:e.cnt}),Object(h.jsx)("span",{className:"close",onClick:function(t){return e.eventDelete(e.id)},children:"X"}),Object(h.jsx)("span",{className:"time",children:["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"][(e.time+6)%7]})]})},E=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={},c}return Object(s.a)(n,[{key:"switcher",value:function(e){var t=this;switch(this.props.filter){case"all":return Object(h.jsx)(I,{id:e.id,active:e.active,cnt:e.cnt,time:e.time,eventDelete:function(e){return t.props.deleteTodo(e)},eventToggle:function(e){return t.props.toggleTodo(e)}},e.id);case"active":return console.log("active"),e.active?Object(h.jsx)(I,{id:e.id,active:e.active,cnt:e.cnt,time:e.time,eventDelete:function(e){return t.props.deleteTodo(e)},eventToggle:function(e){return t.props.toggleTodo(e)}},e.id):void 0;case"checked":return e.active?void 0:Object(h.jsx)(I,{id:e.id,active:e.active,cnt:e.cnt,time:e.time,eventDelete:function(e){return t.props.deleteTodo(e)},eventToggle:function(e){return t.props.toggleTodo(e)}},e.id)}}},{key:"handleSaveToPC",value:function(e){var t=JSON.stringify(e),n=new Blob([t],{type:"text/plain"}),c=URL.createObjectURL(n),o=document.createElement("a");o.download="TODOs.json",o.href=c,o.click()}},{key:"saveJSON",value:function(e){var t={data:this.props.todos,meta:{filter:this.props.filter}};this.handleSaveToPC(t)}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"Todos ".concat(this.props.theme),children:[Object(h.jsx)("ul",{children:this.props.todos.map((function(t,n){return e.switcher(t)}))}),Object(h.jsx)("p",{className:"exportJSON",children:Object(h.jsx)("a",{href:"#download",onClick:function(t){return e.saveJSON(t)},children:"Export JSON"})})]})}}]),n}(c.Component),A=Object(p.b)((function(e){return{todos:e.todos,filter:e.filter,theme:e.app.theme}}),(function(e){return{deleteTodo:function(t){return e(function(e){return{type:O,payload:e}}(t))},toggleTodo:function(t){return e(function(e){return{type:m,payload:e}}(t))},loadTodos:function(){return e({type:"TODO/LOAD",payload:t});var t}}}))(E),S=function(e){return Object(h.jsx)("footer",{className:e.theme,children:Object(h.jsxs)("span",{children:["Daniil Shenyagin\xa92021 ",Object(h.jsx)("a",{href:"https://github.com/den50/internship",children:"GitHub"})]})})},R=n(5),P=(n(32),n(33),n(34),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;R.keys().then((function(t){t.forEach((function(t){R.getItem(t).then((function(n){"INTERNSHIP"!=t&&e.props.addTodoInit(n)}))}))})),R.getItem("INTERNSHIP").then((function(t){e.props.changeTheme(t)}))}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"App ".concat(this.props.theme),children:[Object(h.jsx)(w,{}),Object(h.jsxs)("div",{className:"container",style:{paddingBottom:"90px"},children:[Object(h.jsx)(D,{}),Object(h.jsx)(A,{})]}),Object(h.jsx)(S,{theme:this.props.theme})]})}}]),n}(c.Component)),B=Object(p.b)((function(e){return{theme:e.app.theme}}),(function(e){return{addTodoInit:function(t){return e({type:b,payload:t})},changeTheme:function(t){return e(k(t))}}}))(P),J=n(10),F=n(21),H=n(12),L=n(11),M=function(e){R.setItem(e.id,e)},_=Object(J.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{theme:"light"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return R.setItem("INTERNSHIP",t.payload),Object(H.a)(Object(H.a)({},e),{},{theme:t.payload})}return e},todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:var n={id:(new Date).valueOf(),cnt:t.payload,time:(new Date).getDay(),active:!0};return M(n),[].concat(Object(L.a)(e),[n]);case b:return[].concat(Object(L.a)(e),[t.payload]);case O:for(var c=[],o=0;o<e.length;o++)e[o].id!=t.payload&&c.push(e[o]);return R.removeItem(t.payload).then((function(e){console.log("deleted")})),c;case m:c=[];return e.map((function(e,n){e.id==t.payload?(c.push(Object(H.a)(Object(H.a)({},e),{},{active:!e.active})),!e.active):c.push(e)})),R.getItem(t.payload).then((function(e){e.active=!e.active,R.setItem(t.payload,e)})),c;case y:return t.payload.map((function(e){R.setItem(e.id,e)})),[].concat(Object(L.a)(e),Object(L.a)(t.payload))}return e},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.payload}return e}}),G=Object(F.composeWithDevTools)(Object(J.applyMiddleware)((function(e){return function(t){return function(n){var c=!1,o=[];function a(){o.forEach((function(t){return e.dispatch(t)})),o=[]}var r=Object.assign({},n,{asyncDispatch:function(e){o=o.concat([e]),c&&a()}}),i=t(r);return c=!0,a(),i}}}))),U=Object(J.createStore)(_,G);r.a.render(Object(h.jsx)(p.a,{store:U,children:Object(h.jsx)(B,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.0758e9e6.chunk.js.map